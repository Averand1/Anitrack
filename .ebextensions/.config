option_settings:
  aws:elasticbeanstalk:container:nodejs:
    NodeCommand: "npm start"
  aws:rds:dbinstance:
    DBEngine: "mysql"
    DBInstanceClass: "db.t2.micro"
    DBAllocatedStorage: "20"
    DBMasterUsername: "${RDS_MASTERUSER}"
    DBMasterUserPassword: "${RDS_MASTER_PASSWORD}"
    DBName: "${RDS_DB_NAME}"
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: "production"
    DB_HOST: "${RDS_HOST}"
    DB_PORT: "${RDS_PORT}"
    DB_USER: "${DB_USER}"
    DB_PASSWORD: "${DB_PASSWORD}"
    DB_NAME: "${DB_NAME}"
    SESS_NAME: "${SESS_NAME}"
    SESS_SECRET: "${SESS_SECRET}"
  container_commands:
  01_set_env:
    command: "echo 'export $(cat /opt/elasticbeanstalk/deployment/env | xargs)' > /etc/profile.d/env.sh"
  02_copy_env:
    command: "cp .env /var/app/current/.env"
    cwd: "/home/ad/Anime/.ebextensions/.env"
    leader_only: true